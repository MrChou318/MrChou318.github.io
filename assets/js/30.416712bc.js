(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{534:function(n,s,e){"use strict";e.r(s);var a=e(3),t=Object(a.a)({},(function(){var n=this,s=n.$createElement,e=n._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("p",[n._v("到目前为止，我们都是在 "),e("code",[n._v("index.html")]),n._v(" 文件中手动引入所有资源，然而随着应用程序增长，并且一旦开始 在文件名中使用 "),e("code",[n._v("hash")]),n._v(" 并输出 多个 "),e("code",[n._v("bundle")]),n._v("，\n如果继续手动管理 "),e("code",[n._v("index.html")]),n._v(" 文件，就会变得困难起来。然而，通过一些插件可以使这个过程更容易管控。")]),n._v(" "),e("h1",{attrs:{id:"管理输出"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#管理输出"}},[n._v("#")]),n._v(" 管理输出")]),n._v(" "),e("h2",{attrs:{id:"预先准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#预先准备"}},[n._v("#")]),n._v(" 预先准备")]),n._v(" "),e("p",[e("strong",[n._v("project")])]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("  webpack-demo\n  |- package.json\n  |- webpack.config.js\n  |- /dist\n  |- /src\n    |- index.js\n+   |- print.js\n  |- /node_modules\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br")])]),e("p",[n._v("我们在 "),e("code",[n._v("src/print.js")]),n._v(" 文件中添加一些逻辑：")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("export default function printMe() {\n  console.log('你点我做咩啊？')\n}\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br")])]),e("p",[e("strong",[n._v("src/index.js")])]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("+ import printMe from './print.js'\n\nfunction component() {\n  const element = document.createElement('div');\n  element.innerHTML = ['Hello', 'webpack'].join('===');\n  element.classList.add('hello');\n\n+ const button = document.createElement('button')\n+ button.innerHTML = '点我点我';\n+ button.onclick = printMe;\n+ element.appendChild(button)\n\n  return element;\n}\ndocument.body.appendChild(component());\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br")])]),e("p",[n._v("还要更新 "),e("code",[n._v("dist/index.html")]),n._v(" 文件，来为 webpack 分离入口做好准备：\n"),e("strong",[n._v("dist/index.html")])]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v('<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="utf-8" />\n-  <title>管理资源</title>\n+  <title>管理输出</title>\n+  <script src="./print.bundle.js"><\/script>\n</head>\n<body>\n- <script src="./bundle.js"><\/script>\n+ <script src="./index.bundle.js"><\/script>\n</body>\n</html>\n')])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br")])]),e("p",[e("strong",[n._v("webpack.config.js")])]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("const path = require('path');\n\nmodule.exports = {\n-  entry: './src/index.js',\n+  entry: {\n+    index: './src/index.js',\n+    print: './src/print.js',\n+  },\n  output: {\n-   filename: 'bundle.js',\n+   filename: '[name].bundle.js',\n    path: path.resolve(__dirname, 'dist'),\n  },\n};\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br")])]),e("p",[n._v("执行 "),e("code",[n._v("npm run build")])]),n._v(" "),e("h2",{attrs:{id:"设置-htmlwebpackplugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置-htmlwebpackplugin"}},[n._v("#")]),n._v(" 设置 HtmlWebpackPlugin")]),n._v(" "),e("p",[n._v("首先安装插件，并且调整 "),e("code",[n._v("webpack.config.js")]),n._v(" 文件：")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("npm install --save-dev html-webpack-plugin\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br")])]),e("p",[e("strong",[n._v("webpack.config.js")])]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("  const path = require('path');\n+ const HtmlWebpackPlugin = require('html-webpack-plugin');\n\nmodule.exports = {\n  entry: {\n    index: './src/index.js',\n    print: './src/print.js',\n  },\n+ plugins: [\n+     new HtmlWebpackPlugin({\n+       title: '管理输出',\n+     })\n+ ],\n  output: {\n    filename: '[name].bundle.js',\n    path: path.resolve(__dirname, 'dist'),\n  },\n};\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br"),e("span",{staticClass:"line-number"},[n._v("16")]),e("br"),e("span",{staticClass:"line-number"},[n._v("17")]),e("br"),e("span",{staticClass:"line-number"},[n._v("18")]),e("br")])]),e("p",[n._v("在我们构建之前，你应该了解，虽然在 "),e("code",[n._v("dist/")]),n._v(" 文件夹我们已经有了 "),e("code",[n._v("index.html")]),n._v(" 这个文件，\n然而 "),e("code",[n._v("HtmlWebpackPlugin")]),n._v(" 还是会默认生成它自己的 "),e("code",[n._v("index.html")]),n._v(" 文件。也就是说，它会用新生成的 "),e("code",[n._v("index.html")]),n._v(" 文件，替换我们的原有文件。")]),n._v(" "),e("p",[n._v("如果在代码编辑器中打开 "),e("code",[n._v("index.html")]),n._v("，你会看到"),e("code",[n._v("HtmlWebpackPlugin")]),n._v(" 创建了一个全新的文件，所有的 bundle 会自动添加到 html 中。")]),n._v(" "),e("h2",{attrs:{id:"清理-dist-文件夹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#清理-dist-文件夹"}},[n._v("#")]),n._v(" 清理 /dist 文件夹")]),n._v(" "),e("p",[n._v("通常比较推荐的做法是，在每次构建前清理 "),e("code",[n._v("/dist")]),n._v(" 文件夹，这样只会生成用到的文件。让我们实现这个需求。\n"),e("code",[n._v("clean-webpack-plugin")]),n._v(" 是一个流行的清理插件，安装和配置它")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("npm install --save-dev clean-webpack-plugin\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br")])]),e("p",[e("strong",[n._v("webpack.config.js")])]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("  const path = require('path');\n  const HtmlWebpackPlugin = require('html-webpack-plugin');\n+ const { CleanWebpackPlugin } = require('clean-webpack-plugin');\n\nmodule.exports = {\n  entry: {\n    index: './src/index.js',\n    print: './src/print.js',\n  },\n  plugins: [\n+     new CleanWebpackPlugin(),\n      new HtmlWebpackPlugin({\n        title: '管理输出',\n      })\n  ],\n  output: {\n    filename: '[name].bundle.js',\n    path: path.resolve(__dirname, 'dist'),\n  },\n};\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br"),e("span",{staticClass:"line-number"},[n._v("11")]),e("br"),e("span",{staticClass:"line-number"},[n._v("12")]),e("br"),e("span",{staticClass:"line-number"},[n._v("13")]),e("br"),e("span",{staticClass:"line-number"},[n._v("14")]),e("br"),e("span",{staticClass:"line-number"},[n._v("15")]),e("br"),e("span",{staticClass:"line-number"},[n._v("16")]),e("br"),e("span",{staticClass:"line-number"},[n._v("17")]),e("br"),e("span",{staticClass:"line-number"},[n._v("18")]),e("br"),e("span",{staticClass:"line-number"},[n._v("19")]),e("br"),e("span",{staticClass:"line-number"},[n._v("20")]),e("br")])]),e("p",[n._v("现在，执行 "),e("code",[n._v("npm run build")]),n._v("，检查 "),e("code",[n._v("/dist")]),n._v(" 文件夹。如果一切顺利，现在只会看到构建后生成的文件，而没有旧文件")])])}),[],!1,null,null,null);s.default=t.exports}}]);
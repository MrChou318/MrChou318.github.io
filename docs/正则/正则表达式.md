---
title: 正则表达式
date: 2021-02-22
categories:
    - javascript
tags:
    - 表单验证
---
# 正则表达式
## 一. 限定符（匹配次数）
### 1. `?`: 它前面的字符需要出现0次或1次
```
例如： /ab?c/ 可以匹配到 [ac] [abc] 不能匹配到 [abbc] 等多个'b'
```
### 2. `*`: 它可以匹配0次或多次字符
```
例如： /ab*c/ 可以匹配到 [ac] [abc] [abbbbc]
```
### 3. `+`: 它可以匹配1次及以上字符
```
例如： /ab+c/ 可以匹配到 [abc] [abbbc] 不能匹配到[ac]
```
### 4. `{}`: 它可以限定匹配的数量
```
例如：  /ab{3}c/   可以匹配到 [abbbc] 匹配3次'b'
        /ab{3,5}c/ 可以匹配到 [abbbc] [abbbbc] [abbbbbc] 匹配3-5次'b'
        /ab{3,}c/  可以匹配到 [abbbc] [abbb...c] 匹配3次及以上
        注意','之间不能有空格
```
## 二. '或'运算符
```
例如： /a(cat|dog)/ 可以匹配 [acat] [adog] 
```
## 三. 字符类
- `[]`: 表示里面的内容只取自于它们
```
例如：[a-z]表示所有小写的应为字母，[abc] 能匹配到 a b c 中的任何一个，[a-zA-z]表示所有的英文字母，如若在[]前加上^，表示[]之外的字符
```
## 四. 元字符
- `\d`: 数字字符，等同于[0-9]
- `\w`: 单词字符
- `\s`: 空白符，包含Tab和换行符
- `\D`: 非数字字符
- `\W`: 非单词字符
- `\S`: 非空白字符
- `.`: 代表任意字符，不包含换行符
- `^`: 匹配行首
```
例如： /^a/ 匹配 [abv], [acdd] ...
```
- `$`: 匹配行尾
```
例如：/a$/ 匹配 [dsa], [adgwa] ...
```
## 五. 常用正则
```
1. 纯数字：/^[0-9]*$/
2. n位的数字：/^[0-9]{n}$/
3. 至少n位的数字：/^[0-9]{n,}$/
4. m-n为的数字：/^[0-9]{m,n}$/
5. 零 和 非零开头的数字：/^(0|[1-9][0-9]*)$/
6. 非零开头的最多带两位小数的数字：/^[1-9][0-9]*(\.[0-9]{1,2})?$/
7. 带1-2位小数的正数或负数：/^(\-)?[0-9]+\.[0-9]{1,2}$/
8. 正数、负数、和小数(小数保留2位)：/^(\-)?(0|[1-9][0-9]*)(\.[0-9]{1,2})?$/
9. 有两位小数的正实数：/^(0|[1-9][0-9]*)\.[0-9]{2}$/
10. 有1-3位小数的正实数：/^(0|[1-9][0-9]*)\.[0-9]{1,3}$/
11. 非零的正整数：/^[1-9][0-9]*$/
12. 非零的负整数：/^\-[1-9][0-9]*$/
13. 非负整数：/^([1-9][0-9]*)+|0$/
14. 非正整数：/^(-[1-9][0-9]*)|0$/
15. 汉字：/^[\u4e00-\u9fa5]*$/
16. 英文和数字：/^[A-Za-z0-9]*$/
17. 长度为3-20的所有字符：/.{3,20}$/
18. 由英文字母组成的字符串：/^[A-Za-z]+$/
19. 中文、英文、数字包括下划线：/^[\u4E00-\u9FA5A-Za-z0-9_]+$/
20. 手机号码：/^(13[0-9]|14[5|7]|15[0-35-9]|18[0-35-9]\d{8}$/
```
- **search() 方法**
```
var str = 'Visit Runoob!';
var n = str.search(/Runoob/i) // n = 6
```
用于检索字符串中指定的子字符串（没有匹配的 `n` 就返回`-1`），或检索与正则表达式匹配的子串的起始位置。  
`i` 是一个修饰符 (搜索不区分大小写)。
- **replace() 方法**
```
var str = 'hahaha, Microsoft';
var txt = str.replace(/microsoft/i, 'oho') // 输出 hahaha, oho
```
用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。  
- **正则表达式修饰符**

| 修饰符 | 描述 |
| ------ | ------ |
| i | 执行对大小写不敏感的匹配。 |
| g | 执行全局匹配（查找所有匹配而非在找到第一个匹配后停止） |
| m | 执行多行匹配

| 表达式 | 描述 |
| ------ | ------ |
| [abc] | 查找方括号之间的任何字符 |
| [^abc] | 查找任何不在方括号之间的字符 |
| [0-9] | 查找任何从0-9的数字 |
| [a-z] | 查找任何从小写 a 到小写 z 的字符 |
| [A-Z] | 查找任何从大写 A 到大写 Z 的字符 |
| [A-z] | 查找任何从大写 A 到小写 z 的字符 |
| [adgk] | 查找给定集合内的任何字符 |
| [^adgk] | 查找给定集合外的任何字符 |
| `(red|blue|green)` | 查找任何指定的选项 |

| 元字符 | 描述 |
| ------ | ------ |
| . |	查找单个字符，除了换行和行结束符。 |
| \w |	查找单词字符。等价于 [A-Za-z0-9_] |
| \W |	查找非单词字符。 |
| \d |	查找数字。 |
| \D |	查找非数字字符。 |
| \s |	查找空白字符。 |
| \S |	查找非空白字符。 |
| \b |	匹配单词边界。 |
| \B |	匹配非单词边界。 |
| \0 |	查找 NULL 字符。 |
| \n |	查找换行符。 |
| \f |	查找换页符。 |
| \r |	查找回车符。 |
| \t |	查找制表符。 |
| \v |	查找垂直制表符。 |
| \xxx |	查找以八进制数 xxx 规定的字符。 |
| \xdd |	查找以十六进制数 dd 规定的字符。 |
| \uxxxx |	查找以十六进制数 xxxx 规定的 Unicode 字符。 |

| 量词 | 描述 |
| ------ | ------ |
| n+	| 匹配任何包含至少一个 n 的字符串。例如，/a+/ 匹配 "candy" 中的 "a"，"caaaaaaandy" 中所有的 "a"。 |
| n*	| 匹配任何包含零个或多个（包含一个） n 的字符串。例如，/bo*/ 匹配 "A ghost booooed" 中的 "boooo"，"A bird warbled" 中的 "b"，但是不匹配 "A goat grunted"。 |
| n? | 匹配任何包含零个或一个 n 的字符串。例如，/le?/ 匹配"angleeee" 中的 "le"。 |
| n{X}	| 匹配包含 X 个 n 的序列的字符串。例如，/a{2}/ 不匹配 "candy," 中的 "a"，但是匹配 "caandy," 中的两个 "a"，且匹配 "caaandy." 中的前两个 "a"。 |
| n{X,}	| X 是一个正整数。前面的模式 n 连续出现至少 X 次时匹配。例如，/a{2,}/ 不匹配 "candy" 中的 "a"，但是匹配 "caandy" 和 "caaaaaaandy." 中所有的 "a"。 |
| n{X,Y}	| X 和 Y 为正整数。前面的模式 n 连续出现至少 X 个，至多匹配 Y 个。例如，/a{1,3}/ 不匹配 "cndy"，匹配 "candy," 中的 "a"，"caandy," 中的两个 "a"，匹配 "caaaaaaandy" 中的前面三个 "a"。注意，当匹配 "caaaaaaandy" 时，即使原始字符串拥有更多的 "a"，匹配项也是 "aaa"。 |
| n$	| 匹配任何结尾为 n 的字符串。 |
| ^n	| 匹配任何开头为 n 的字符串。 |
| ?=n	| 匹配任何其后紧接指定字符串 n 的字符串。例如：/jack(?=tr)/.exec('ssssjacktrww') |
| ?!n	| 匹配任何其后没有紧接指定字符串 n 的字符串。 |
- **test()方法**
test()方法是一个正则表达式方法，用于检测一个字符串是否匹配某个模式，如果字符串中含有匹配的文字则返回true，否则返回false。
```
var patt = /e/;
var flag = patt.test('The best'); // 返回true
```
- **exec()方法**
exex()是一个正则表达式方法， 该函数返回一个数组，其中存放匹配的结果，如果未匹配到，则返回null。
```
/e/.exec("The best things in life are free!");
// 输出
[{
  0: "e"
  groups: undefined
  index: 2
  input: "The best things in life are free!"
  length: 1
}]


const RE_DATE = /(\d{4})-(\d{2})-(\d{2})/;
const matchObj = RE_DATE.exec('1999-12-31');
console.log('matchObj', matchObj);
// 0: "1999-12-31"
// 1: "1999"
// 2: "12"
// 3: "31"
// groups: undefined
// index: 0
// input: "1999-12-31"
// length: 4

**es2018引入了具名匹配** 注意groups属性
const RE_DATE = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
const matchObj = RE_DATE.exec('1999-12-31');
console.log('matchObj', matchObj);
// 0: "1999-12-31"
// 1: "1999"
// 2: "12"
// 3: "31"
// groups: {
    day: "31"
    month: "12"
    year: "1999"
}
// index: 0
// input: "1999-12-31"
// length: 4

// ps：如果没有匹配到，键名依旧存在，值是undefined
```
